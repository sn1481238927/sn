<html class="x-admin-sm" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>商家管理</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <link rel="stylesheet" th:href="@{/css/font.css}">
    <link rel="stylesheet" th:href="@{/css/xadmin.css}">
    <script type="text/javascript" src="../js/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="../lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/xadmin.js"></script>
    <script type="text/javascript" src="../js/cookie.js"></script>
    <script type="text/javascript" src="../js/urlAdress.js"></script>
    <script src="../js/formDate.js"></script>
    <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
    <!--[if lt IE 9]>
    <script src="/${res}/award/js/html5.min.js"></script>
    <script src="/${res}/award/js/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="../css/my_layui.css">
    <style type="text/css">
        .layui-table-cell .layui-form-checkbox[lay-skin=primary]{top: 5px;}
        .x-nav{
        background-color: #e6e6e6;
    }
    .openTable{
            width:100%;
        }
        .left{
            width:30%;
            text-align:right;
            padding:12px 0px;
        }
        .right{
            width:67%;
            text-align:left;
            padding:12px 0px 12px 3%
        }
        </style>
</head>
<body>
  <div class="x-nav">
        <span class="layui-breadcrumb">
          <a _href="#">商家管理</a>
        </span>
      <a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right" href="javascript:location.replace(location.href);" title="刷新">
          <i class="iconfont" style="line-height:30px">&#xe6aa;</i></a>
  </div>
 
  </div>
  <div class="x-body">
      <div class="layui-row">
          <form class="layui-form layui-col-md12 x-so" id="searchForm">
              商家名称：
              <input type="text" name="name" placeholder="关键字" autocomplete="off" class="layui-input">
              登录用户名：
              <input type="text" name="username" placeholder="关键字" autocomplete="off" class="layui-input">
              <button class="layui-btn" lay-submit="searchBtn" lay-filter="search">
                  <i class="layui-icon">&#xe615;</i>查询
          </form>
          <xblock>
            <!-- [@scms_perm url="/awardSys/cooperatorAdd.jspx"] -->
            <button class="layui-btn" onclick='x_admin_show("添加商家","./merchantAdd.html",800,600,"",1)'><i class="layui-icon"></i>添加</button>
            <!-- [/@scms_perm] -->
            <span class="x-right" style="line-height:40px"><!-- 共有数据：88 条 --></span>
        </xblock>
      </div>
      <table class="layui-table x-admin" id="UnitListTable" lay-filter="UnitListTable"></table>
  </div> 
<script type="text/html" id="barDemo">
    <a title="编辑" lay-event="edit_btn" href="javascript:;"><i class="layui-icon">&#xe642;</i></a>
</script>
<script type="text/html" id="sta">
    {{# if(d.user.enabled==true){ }}
        <button class='layui-btn layui-btn-radius layui-btn-danger' lay-event="qiyong">禁用</button>
       {{# }else{ }}
        <button class='layui-btn layui-btn-radius layui-btn-warm' lay-event="jinyong">启用</button>
    {{# } }}
</script>
<!--<script>-->
<!--    var token=localStorage.getItem("ifClick");-->
<!--	layui.use(['table','jquery','form'], function(){-->
<!--        $ = layui.jquery;-->
<!--        var table = layui.table,layer = layui.layer;-->
<!--        var form = layui.form;-->
<!--             // 监听条件搜索提交-->
<!--        form.on('submit(search)', function(data){-->
<!--            table.reload('UnitListTable', {-->
<!--                page: {-->
<!--                  curr: 1-->
<!--                },-->
<!--                where: {-->
<!--                  name: data.field.name,-->
<!--                  username: data.field.username-->
<!--                }-->
<!--            });-->

<!--            return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。-->
<!--        });-->
<!--		table.render({-->
<!--		    elem: '#UnitListTable'-->
<!--		    ,height: 'full'-->
<!--            ,url: urlAdress+"/merchants/list" //数据接口-->
<!--            ,where:{sortId:1}-->
<!--            ,method: 'GET'-->
<!--          -->
<!--            ,headers: {-->
<!--                'Authorization':'bearer '+token-->
<!--                //'Authorization':'bearer 94211b05-c88c-44f9-b61a-dc1c57aeb9a9'-->
<!--            } -->
<!--            // ,contentType: 'application/json'-->
<!--            ,request: {-->
<!--                pageName: 'page',-->
<!--                limitName: 'limit',-->
<!--                username: 'data.field.username',-->
<!--                name: 'data.field.name',-->
<!--            }-->
<!--		    ,cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增-->
<!--            ,even : true //开启隔行背景-->
<!--		    ,page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档-->
<!--				      layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局-->
<!--				      //,curr: 1 //设定初始在第 1 页-->
<!--				      ,groups: 5 //只显示 5 个连续页码-->
<!--				      ,first: true //显示首页-->
<!--				      ,last: true //显示尾页-->
<!--		    }-->
<!--            // ,page: true-->
<!--		    ,limits : [5, 10, 15]-->
<!--            ,limit: 5-->
<!--            ,cols: [[ //表头-->
<!--                {field: 'data-id',hide: true, templet: function(d){-->
<!--                    return d.id-->
<!--                }},-->
<!--                {field: 'type', title: '商家经营类型', sort: true, fixed: 'left',templet: function(d){-->
<!--                    return d.type-->
<!--                }},-->
<!--                {field: 'name', title: '商家名称', fixed: 'left',templet: function(d){-->
<!--                    return (d.name?d.name:'');-->
<!--                }}-->
<!--		        ,{field: 'username', title: '登录用户名',templet: function(d){-->
<!--                    return (d.username?d.username:'')-->
<!--                }}-->
<!--                ,{field: 'phone', title: '手机号',templet: function(d){-->
<!--                   return d.user.phone?d.user.phone:'';-->
<!--                }}-->
<!--                ,{field: 'create_time', title: '创建时间',templet: function(d){-->
<!--                    return formatDate1(d.create_time);-->

<!--                }} -->
<!--                ,{fixed: 'right', title: '显示状态', toolbar: '#sta',}      -->
<!--                ,{fixed: 'right', title:'操作', align:'center', toolbar: '#barDemo'}		   -->
<!--            ]] -->
<!--            ,parseData: function(res){ //将原始数据解析成 table 组件所规定的数据-->
<!--                    console.log(res);-->
<!--                    return {-->
<!--                        "code": res.code, //解析接口状态-->
<!--                        "msg": res.msg, //解析提示文本-->
<!--                        //"count": res.datasize, //解析数据长度-->
<!--                        "data": res.data, //解析数据列表-->
<!--                        'count':res.count  //数据总数-->
<!--                    }-->
<!--                },-->
<!--            done: function (res, curr, count) {-->
<!--              table.on('tool(UnitListTable)', function (obj) { //注：tool是工具条事件名，test是table原始容器的属性 lay-filter="对应的值"-->
<!--                    console.log(obj);-->
<!--                    var data= obj.data; //获得当前行数据-->
<!--                    var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）-->
<!--                    var tr = obj.tr; //获得当前行 tr 的DOM对象-->
<!--                    if (layEvent == "edit_btn"){-->
<!--                        x_admin_show('编辑','./merchantEidt.html?id='+data.id, 600, 400);                     -->
<!--                    }else if(layEvent == "jinyong"){-->
<!--                        $.ajax({-->
<!--                            type: "POST",-->
<!--                            url: urlAdress+"/merchants/forbidden",-->
<!--                            data:  JSON.stringify({id:obj.data.id}),-->
<!--                            contentType: 'application/json',-->
<!--                            dataType: 'json',-->
<!--                            success: function(result) {   -->
<!--                            if(result.resp_code !== 0){-->
<!--                                layer.msg(result.message);-->
<!--                            }else{-->
<!--                                layer.alert("禁用成功", {icon: 6},function () {-->
<!--                                table.render()-->
<!--                                location.reload();-->
<!--                                // 获得frame索引-->
<!--                                var index = parent.layer.getFrameIndex(window.name);-->
<!--                                //关闭当前frame-->
<!--                                parent.layer.close(index);-->
<!--                                //修改成功后刷新父界面-->
<!--                                window.parent.location.reload();-->
<!--                                });-->
<!--                            }-->
<!--                        }-->
<!--                   })-->
<!--                }else if(layEvent == "qiyong"){-->
<!--                        $.ajax({-->
<!--                            type: "POST",-->
<!--                            url: urlAdress+"/merchants/forbidden",-->
<!--                            data:  JSON.stringify({id:obj.data.id}),-->
<!--                            contentType: 'application/json',-->
<!--                            dataType: 'json',-->
<!--                            success: function(result) {   -->
<!--                            if(result.resp_code !== 0){-->
<!--                                layer.msg(result.message);-->
<!--                            }else{-->
<!--                                layer.alert("启用成功", {icon: 6},function () {-->
<!--                                table.render()-->
<!--                                location.reload();-->
<!--                                // 获得frame索引-->
<!--                                var index = parent.layer.getFrameIndex(window.name);-->
<!--                                //关闭当前frame-->
<!--                                parent.layer.close(index);-->
<!--                                //修改成功后刷新父界面-->
<!--                                window.parent.location.reload();-->
<!--                                });-->
<!--                            }-->
<!--                        }-->
<!--                   })-->
<!--                }else{-->

<!--                }-->
<!--              });-->
<!--            },-->
<!--            error:function(data) {-->
<!--                console.log(data);-->
<!--                if(data.resp_msg=='Invalid access token: '){-->
<!--                    window.location.href='../pfIndex.html'-->
<!--                }-->
<!--            }-->
<!--        });-->
<!--	});-->
<!--    layui.use(['form','jquery', 'table', 'layer'], function(){-->
<!--        var $ = layui.jquery;-->
<!--        var form = layui.form, table = layui.table, layer = layui.layer;-->
<!--        //绑定搜素事件-->
<!--        $("#searchBtn").click(function(){-->
<!--            var name = $("#name").val();-->
<!--            var username = $("#username").val();-->
<!--            // var memberType = $("#userName").val();-->
<!--            // var memberCard = $("#memberCard").val();-->
<!--        })-->

<!--        // 监听条件搜索提交-->
<!--        form.on('submit(search)', function(data){-->
<!--            table.reload('UnitListTable', {-->
<!--                page: {-->
<!--                  curr: 1-->
<!--                },-->
<!--                where: {-->
<!--                  name: data.field.name,-->
<!--                  username: data.field.username-->
<!--                }-->
<!--            });-->

<!--            return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。-->
<!--        });    -->
<!--    })     -->
<!-- -->
<!--</script>-->
</body>
</html>